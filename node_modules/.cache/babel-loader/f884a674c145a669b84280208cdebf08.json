{"ast":null,"code":"var _jsxFileName = \"/home/luismsandoval/projects/courses/code301/can-of-books-pair/can-of-books-frontend/src/BestBooks.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport Carousel from 'react-bootstrap/Carousel';\nimport Image from 'react-bootstrap/Image';\nimport Button from 'react-bootstrap/Button';\nimport BookFormModal from './BookFormModal';\nimport BookUpdate from './BookUpdate';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass BestBooks extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.displayCreateForm = () => {\n      this.setState({\n        showModal: true\n      });\n    };\n\n    this.hideCreateForm = () => {\n      this.setState({\n        showModal: false\n      });\n    };\n\n    this.updateFilteredBooks = filteredBooks => {\n      this.setState({\n        books: filteredBooks\n      });\n      window.location.reload();\n    };\n\n    this.handleBookCreate = async newBookInfo => {\n      const response = await axios.post(`${process.env.REACT_APP_SERVER}/books`, newBookInfo);\n      this.setState({\n        books: [...this.state.books, response.data]\n      });\n    };\n\n    this.hideUpdateForm = () => {\n      this.setState({\n        selectedUpdateBook: {},\n        showUpdateModal: false\n      });\n    };\n\n    this.showUpdateForm = () => {\n      this.setState({\n        showUpdateModal: true\n      });\n    };\n\n    this.handleBookUpdate = (event, book) => {\n      console.log(\"Book: \", book);\n      console.log(\"TYPEOF book: \", typeof book);\n      this.setState({\n        selectedUpdateBook: book,\n        showUpdateModal: true\n      }, console.log(\"STATE: \", this.state));\n    };\n\n    this.state = {\n      books: [],\n      selectedUpdateBook: {},\n      showModal: false,\n      showUpdateModal: false\n    };\n  }\n\n  async fetchBooks() {\n    let apiUrl = `${process.env.REACT_APP_SERVER}/books`;\n\n    try {\n      const response = await axios.get(apiUrl);\n      this.setState({\n        books: response.data\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  /* TODO: Make a GET request to your API to fetch all the books from the database  */\n  async componentDidMount() {\n    this.fetchBooks();\n  }\n\n  render() {\n    console.log(this.state.showUpdateModal);\n    /* TODO: render all the books in a Carousel */\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"My Essential Lifelong Learning & Formation Shelf\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: this.displayCreateForm,\n        children: \"Add Book\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(BookFormModal, {\n        showModal: this.state.showModal,\n        hideCreateForm: this.hideCreateForm,\n        handleBookCreate: this.handleBookCreate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(BookUpdate, {\n        books: this.state.books,\n        book: this.state.selectedUpdateBook,\n        handleBookUpdate: this.handleBookUpdate,\n        hideUpdateForm: this.hideUpdateForm,\n        onHide: this.hideUpdateForm,\n        show: this.state.showUpdateModal,\n        updateFilteredBooks: this.updateFilteredBooks\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), this.state.books.length ? /*#__PURE__*/_jsxDEV(Carousel, {\n        variant: \"dark\",\n        children: this.state.books.map(book => /*#__PURE__*/_jsxDEV(Carousel.Item, {\n          children: [/*#__PURE__*/_jsxDEV(Image, {\n            src: \"https://via.placeholder.com/150\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Carousel.Caption, {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: book.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: book.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(Book, {\n              books: this.state.books,\n              book: book,\n              handleBookUpdate: this.handleBookUpdate,\n              updateFilteredBooks: this.updateFilteredBooks,\n              show: this.showUpdateForm\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 21\n          }, this)]\n        }, book._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 19\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"No Books Found \\uD83D\\uDCA9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nclass Book extends React.Component {\n  constructor() {\n    super(...arguments);\n\n    this.handleBookDelete = async (event, bookToBeDeleted) => {\n      console.log(this.props.books.length);\n      console.log('book to be deleted: ', bookToBeDeleted);\n      const filteredbooks = this.props.books.filter(book => book._id !== bookToBeDeleted);\n      this.props.updateFilteredBooks(filteredbooks);\n      await axios.delete(`${process.env.REACT_APP_SERVER}/books/${bookToBeDeleted}`);\n      console.log(this.props.books.length);\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: event => this.handleBookDelete(event, this.props.book._id),\n        children: \"Remove Book\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: event => this.props.handleBookUpdate(event, this.props.book),\n        children: \"Update Book\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default BestBooks;","map":{"version":3,"names":["React","axios","Carousel","Image","Button","BookFormModal","BookUpdate","BestBooks","Component","constructor","props","displayCreateForm","setState","showModal","hideCreateForm","updateFilteredBooks","filteredBooks","books","window","location","reload","handleBookCreate","newBookInfo","response","post","process","env","REACT_APP_SERVER","state","data","hideUpdateForm","selectedUpdateBook","showUpdateModal","showUpdateForm","handleBookUpdate","event","book","console","log","fetchBooks","apiUrl","get","error","componentDidMount","render","length","map","title","description","_id","Book","handleBookDelete","bookToBeDeleted","filteredbooks","filter","delete"],"sources":["/home/luismsandoval/projects/courses/code301/can-of-books-pair/can-of-books-frontend/src/BestBooks.js"],"sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport Carousel from 'react-bootstrap/Carousel';\nimport Image from 'react-bootstrap/Image';\nimport Button from 'react-bootstrap/Button';\nimport BookFormModal from './BookFormModal';\nimport BookUpdate from './BookUpdate';\n\nclass BestBooks extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      books: [],\n      selectedUpdateBook: {},\n      showModal: false,\n      showUpdateModal: false\n    }\n  }\n  async fetchBooks() {\n    let apiUrl = `${process.env.REACT_APP_SERVER}/books`;\n    try {\n      const response = await axios.get(apiUrl);\n      this.setState({ books: response.data });\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  displayCreateForm = () => {\n    this.setState({\n      showModal: true,\n    })\n  }\n\n  hideCreateForm = () => {\n    this.setState({\n      showModal: false\n    })\n  }\n\n  updateFilteredBooks = (filteredBooks) => {\n    this.setState({\n      books: filteredBooks\n    })\n    window.location.reload();\n  }\n\n\n  /* TODO: Make a GET request to your API to fetch all the books from the database  */\n\n  async componentDidMount() {\n    this.fetchBooks();\n  }\n\n  handleBookCreate = async (newBookInfo) => {\n    const response = await axios.post(`${process.env.REACT_APP_SERVER}/books`, newBookInfo);\n  \n    this.setState({ books: [...this.state.books, response.data] })\n \n  }\n\n  hideUpdateForm = () => {\n    this.setState({\n      selectedUpdateBook: {},\n      showUpdateModal: false\n    });\n  }\n\n  showUpdateForm =() =>{\n    this.setState({\n      showUpdateModal: true\n    })\n  }\n\n  handleBookUpdate = (event, book) => {\n    console.log(\"Book: \", book);\n    console.log(\"TYPEOF book: \", typeof book);\n    this.setState({\n      selectedUpdateBook: book,\n      showUpdateModal: true\n    }, console.log(\"STATE: \", this.state));\n  };\n\n  render() {\n    console.log(this.state.showUpdateModal);\n    /* TODO: render all the books in a Carousel */\n\n    return (\n      <>\n        <h2>My Essential Lifelong Learning &amp; Formation Shelf</h2>\n        <Button onClick={this.displayCreateForm}>Add Book</Button>\n        <BookFormModal\n          showModal={this.state.showModal}\n          hideCreateForm={this.hideCreateForm}\n          handleBookCreate={this.handleBookCreate} />\n        <BookUpdate \n        books={this.state.books}\n        book={this.state.selectedUpdateBook}\n        handleBookUpdate = {this.handleBookUpdate}\n        hideUpdateForm = {this.hideUpdateForm}\n        onHide = {this.hideUpdateForm}\n        show = {this.state.showUpdateModal}\n        updateFilteredBooks = {this.updateFilteredBooks}\n        />\n\n        {this.state.books.length ?\n          <Carousel variant='dark'>\n            {\n              this.state.books.map(book => (\n            \n                  <Carousel.Item key={book._id}>\n                    <Image src=\"https://via.placeholder.com/150\" />\n                    <Carousel.Caption>\n                      <h3>{book.title}</h3>\n                      <p>{book.description}</p>\n                    <Book\n                      books={this.state.books}\n                      book={book}\n                      handleBookUpdate={this.handleBookUpdate}\n                      updateFilteredBooks={this.updateFilteredBooks}\n                      show = {this.showUpdateForm}\n                       />\n                      \n                    </Carousel.Caption>\n                  </Carousel.Item>\n              ))\n            }\n          </Carousel> : (\n            <h3>No Books Found 💩</h3>\n          )\n        }\n      </>\n    )\n  }\n}\n\nclass Book extends React.Component {\n\n  handleBookDelete = async (event, bookToBeDeleted) => {\n    console.log(this.props.books.length)\n    console.log('book to be deleted: ', bookToBeDeleted);\n    const filteredbooks = this.props.books.filter(book => book._id !== bookToBeDeleted);\n    this.props.updateFilteredBooks(filteredbooks);\n    await axios.delete(`${process.env.REACT_APP_SERVER}/books/${bookToBeDeleted}`);\n    console.log(this.props.books.length);\n  }\n\n\n\n\n  render() {\n    return (\n      <>\n\n        < Button onClick={event => this.handleBookDelete(event, this.props.book._id)} >Remove Book</Button >\n        <Button onClick={event => this.props.handleBookUpdate(event, this.props.book)}>Update Book</Button>\n\n      </>\n    )\n  }\n}\n\nexport default BestBooks;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}